<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Christopher Baker <http://christopherbaker.ent>">
    <link rel="shortcut icon" href="./img/favicon.ico">
    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.css" rel="stylesheet">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="css/jquery.fileupload-ui.css">

    <title>ofSketch</title>

    <!-- Custom styles for this template -->
    <link href="./css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Wrap all page content here -->
    <div id="wrap">

      <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" >
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="http://openframeworks.cc" target="_blank" >
              <img src="./img/openFrameworks_header.png"/>
            </a>
          </div>
            <div class="btn-toolbar" role="toolbar" style="margin-top: 8px;">
              <div class="btn-group">
                <button id="toolbar-run" type="button" class="btn btn-default" title="Run Program">
                  <span class="glyphicon glyphicon-play"></span> 
                </button>
                <button id="toolbar-stop" type="button" class="btn btn-default" title="Stop Program">
                  <span class="glyphicon glyphicon-stop"></span> 
                </button>
              </div>
              <div class="btn-group">
                <button id="toolbar-save" type="button" class="btn btn-default" title="Save Project">
                  <span class="glyphicon glyphicon-floppy-save"></span> 
                </button>
                <button id="toolbar-open-project" type="button" class="btn btn-default" title="Open Project">
                  <span class="glyphicon glyphicon-folder-open"></span> 
                </button>
                <button id="toolbar-create-project" type="button" class="btn btn-default" title="New Project">
                  <span class="glyphicon glyphicon-folder-close"></span> 
                </button>
              </div>
              <div class="btn-group">
                <button id="toolbar-upload-media" type="button" class="btn btn-default" title="Upload File">
                  <span class="glyphicon glyphicon-paperclip"></span> 
                </button>
              </div>
              <div class="btn-group" style="float: right;">
                <button type="button" class="btn btn-default" title="openFrameworks Reference">
                    <a href="http://openframeworks.cc/documentation" target="_blank">Reference</a>
                </button>
                <button type="button" class="btn btn-default" title="openFrameworks Forum">
                    <a href="http://forum.openframeworks.cc/" target="_blank"> Forum</a>
                </button>
                <button id="toolbar-settings" type="button" class="btn btn-default" title="Settings">
                    <span class="glyphicon glyphicon-cog"></span> 
                </button>
              </div>
            </div> <!-- btn-toolbar -->
        </div> <!-- container -->
        <div class="container" style="display: none;">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><img src="./img/openFrameworks_header.png"/></a>
          
            <ul id="toolbar" class="nav navbar-nav">
              <li>
                <a id="toolbar-run" 
                    href="#" 
                    class="glyphicon glyphicon-play" 
                    title="Run Program"></a>
              </li>
              <li>
                <!-- TODO: disable stop button when not running -->
                <a id="toolbar-stop" 
                   href="#" 
                   class="glyphicon glyphicon-stop" 
                   title="Stop Program">
                 </a>
              </li>

              <li>
                <a id="toolbar-save" 
                   href="#" 
                   class="glyphicon glyphicon-floppy-save" 
                   title="Stop Program">
                 </a>
              </li>

              <li>
                <a id="toolbar-addons" 
                   href="#addonsModal" 
                   class="glyphicon glyphicon-plus" 
                   data-toggle="modal"></a>
              </li>
              <li>
                <a id="toolbar-upload-media" 
                   href="#uploadMediaModal" 
                   class="glyphicon glyphicon-paperclip" 
                   data-toggle="modal"></a>
              </li>

              <li>
                <a id="toolbar-create-project" 
                   href="#notImplementedModal" 
                   class="glyphicon glyphicon-file" 
                   data-toggle="modal" 
                   title="Create New Project">
                </a>
              </li>

              <li>
                <a id="toolbar-open-project" 
                   href="#notImplementedModal" 
                   class="glyphicon glyphicon-open" 
                   data-toggle="modal" title="Open Project">
                 </a>
              </li>

              <li>
                <a id="toolbar-import-project" 
                   href="#notImplementedModal" 
                   class="glyphicon glyphicon-import" 
                   data-toggle="modal" 
                   title="Import Project">
                 </a>
              </li>

              <li>
                <a id="toolbar-export-project" 
                   href="#notImplementedModal" 
                   class="glyphicon glyphicon-export" 
                   data-toggle="modal" 
                   title="Export Project">
                 </a>
              </li>

              <li>
                <a id="toolbar-settings" 
                   href="#settingsModal" 
                   class="glyphicon glyphicon-cog"
                   data-toggle="modal" 
                   title="Settings">
                </a>
              </li>          

            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>

      <!-- Upload Modal -->
      <div class="modal fade" id="uploadMediaModal" tabindex="-1" role="dialog" aria-labelledby="uploadMediaModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Upload Media</h4>
            </div>
            <div class="modal-body">
              <!-- The fileinput-button span is used to style the file input field as button -->
              <span class="btn btn-success fileinput-button">
                  <i class="glyphicon glyphicon-plus"></i>
                  <span>Add files...</span>
                  <!-- The file input field used as target for the file upload widget -->
                  <input id="fileupload" type="file" name="files[]" multiple>
              </span>
              <br>
              <br>
              <!-- The global progress bar -->
              <div id="progress" class="progress">
                  <div class="progress-bar progress-bar-success"></div>
              </div>
              <!-- The container for the uploaded files -->
              <div id="files" class="files"></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <!-- Addons Modal -->
      <div class="modal fade" id="addonsModal" tabindex="-1" role="dialog" aria-labelledby="addonsModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Addons</h4>
            </div>
            <div class="modal-body">
              To be implemented.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <!-- Settings Modal -->
      <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Settings</h4>
            </div>
            <div class="modal-body">
              To be implemented.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <!-- Settings Modal -->
      <div class="modal fade" id="notImplementedModal" tabindex="-1" role="dialog" aria-labelledby="notImplementedModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Not implemented yet ...</h4>
            </div>
            <div class="modal-body">
              To be implemented.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

      <!-- New Class Modal -->   
      <div class="modal fade" id="newClassModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">New Class</h4>
            </div>
            <div class="modal-body">
              <div class="input-group">
                <input id="new-class-name" type="text" class="form-control" placeholder="MyClass">
                <span class="input-group-btn">
                  <button id="create-class" class="btn btn-default" type="button" data-dismiss="modal">Create</button>
                </span>
              </div>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="container">

      <!-- Begin page content -->
      <ul class="nav nav-tabs">
          <li class="dropdown">
              <a class="dropdown-toggle glyphicon glyphicon-book" data-toggle="dropdown" href="#">
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu action-menu" role="menu">

                <li><a href="#" class="new-class">New Class</a></li>
                <li><a href="#">Rename Class</a></li>
                <li><a href="#">Delete Class</a></li>
                <li class="divider"></li>
                <li><a href="#">Rename Project</a></li>
                <li><a href="#">Delete Project</a></li>
                <li class="divider"></li>
                <li><a href="#">Load Project</a></li>
              </ul>
          </li>
          <!--<li class="active file-tab"><a href="#">HelloWorld</a></li>-->
          <li class="new-class">
            <a href="#newClassModal" class="glyphicon glyphicon-plus"> </a>
          </li>
        </ul>
    
      <pre id="editor">loading...</pre>
      <div id="editor-message-container"></div>
      <pre id="console">Console</pre>

      </div>
    </div>

    <div id="footer">
    </div>


<script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/jquery.jsonrpcclient.js"></script>
<script src="./js/jquery.json.js"></script>
<script src="./js/prism.js"></script>
<script src="./js/underscore.js"></script>

<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="js/vendor/jquery.ui.widget.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="js/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="js/canvas-to-blob.min.js"></script>

<script src="./js/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="js/jquery.fileupload.js"></script>
<!-- The File Upload processing plugin -->
<script src="js/jquery.fileupload-process.js"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="js/jquery.fileupload-image.js"></script>
<!-- The File Upload audio preview plugin -->
<script src="js/jquery.fileupload-audio.js"></script>
<!-- The File Upload video preview plugin -->
<script src="js/jquery.fileupload-video.js"></script>
<!-- The File Upload validation plugin -->
<script src="js/jquery.fileupload-validate.js"></script>

<script src="./js/ofxHTTP.js"></script>
<script src="./js/ofxUtils.js"></script>
<script src="./js/ofSketch/helpers.js"></script>

<script src="./js/ofSketch/classes/Project.js"></script>
<script src="./js/ofSketch/classes/SketchEditor.js"></script>
<script src="./js/ofSketch/ofSketch.js"></script>

<script>
/*jslint unparam: true, regexp: true */
/*global window, $ */
$(function () {
    'use strict';
    // Change this to the location of your server-side upload handler:
    var url = '/upload',
        uploadButton = $('<button/>')
            .addClass('btn btn-primary')
            .prop('disabled', true)
            .text('Processing...')
            .on('click', function () {
                var $this = $(this),
                    data = $this.data();
                $this
                    .off('click')
                    .text('Abort')
                    .on('click', function () {
                        $this.remove();
                        data.abort();
                    });
                data.submit().always(function () {
                    $this.remove();
                });
            });
    $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        autoUpload: false,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png|mov|mp3)$/i,
        maxFileSize: 5000000*1024, // 5 GB
        // Enable image resizing, except for Android and Opera,
        // which actually support image resizing, but fail to
        // send Blob objects via XHR requests:
        disableImageResize: /Android(?!.*Chrome)|Opera/
            .test(window.navigator.userAgent),
        previewMaxWidth: 100,
        previewMaxHeight: 100,
        previewCrop: true
    }).on('fileuploadadd', function (e, data) {
        data.context = $('<div/>').appendTo('#files');
        $.each(data.files, function (index, file) {
            var node = $('<p/>')
                    .append($('<span/>').text(file.name));
            if (!index) {
                node
                    .append('<br>')
                    .append(uploadButton.clone(true).data(data));
            }
            node.appendTo(data.context);
        });
    }).on('fileuploadprocessalways', function (e, data) {
        var index = data.index,
            file = data.files[index],
            node = $(data.context.children()[index]);
        if (file.preview) {
            node
                .prepend('<br>')
                .prepend(file.preview);
        }
        if (file.error) {
            node
                .append('<br>')
                .append(file.error);
        }
        if (index + 1 === data.files.length) {
            data.context.find('button')
                .text('Upload')
                .prop('disabled', !!data.files.error);
        }
    }).on('fileuploadprogressall', function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#progress .progress-bar').css(
            'width',
            progress + '%'
        );
    }).on('fileuploaddone', function (e, data) {
        $.each(data.result.files, function (index, file) {
            var link = $('<a>')
                .attr('target', '_blank')
                .prop('href', file.url);
            $(data.context.children()[index])
                .wrap(link);
        });
    }).on('fileuploadfail', function (e, data) {
        $.each(data.result.files, function (index, file) {
            var error = $('<span/>').text(file.error);
            $(data.context.children()[index])
                .append('<br>')
                .append(error);
        });
    }).prop('disabled', !$.support.fileInput)
        .parent().addClass($.support.fileInput ? undefined : 'disabled');
});
</script>
  </body>
</html>
